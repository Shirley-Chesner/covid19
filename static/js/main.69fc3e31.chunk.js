(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{164:function(e,t,a){e.exports=a(354)},169:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(50),i=a.n(c),o=(a(169),a(170),a(51)),s=a(7),l=a(10),u=a.n(l),d=a(14),m="https://covid19.mathdro.id/api/";function f(e){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),l=o[0],m=o[1];return Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:y(a=t.sent)?m(a.error.message):c(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),m(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}m(null),function(){t.apply(this,arguments)}()}),[e]),{stats:r,error:l}}function y(e){return void 0!==e.error}var p=a(27),E=new Date("1/22/2020");function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=Object(n.useState)({}),a=Object(s.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=O(e,j()),n={},r=a.map((function(e){return e.toLocaleDateString().replace(/\//g,"-")})).map(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("daily/".concat(t));case 2:e.sent.forEach((function(e){var a={confirmed:g(e.confirmed),recovered:g(e.recovered),deaths:g(e.deaths)};if("Mainland China"===e.countryRegion&&(e.countryRegion="China"),n[e.countryRegion])if(n[e.countryRegion][t]){var r=n[e.countryRegion][t];n[e.countryRegion][t]={confirmed:a.confirmed+r.confirmed,recovered:a.recovered+r.recovered,deaths:a.deaths+r.deaths}}else n[e.countryRegion][t]=a;else n[e.countryRegion]=Object(p.a)({},t,a)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=5,Promise.all(r);case 5:c(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}function g(e){return""!==e?parseInt(e):0}function O(e,t){for(var a=[],n=new Date(e);n<t;)a.push(new Date(n)),n.setDate(n.getDate()+1);return a}function j(){var e=new Date;return e.setDate(e.getDate()-1),e}var w=new Date("1/22/2020");a(172);function x(e){return r.a.createElement("div",{className:"stats-summary"},e.title&&r.a.createElement("div",{className:"stats-title"},e.title),r.a.createElement("div",{className:"stats-group"},r.a.createElement("div",{className:"stat"},r.a.createElement("div",{className:"stat-label"},"confirmed"),r.a.createElement("div",{className:"stat-number"},e.confirmed)),r.a.createElement("div",{className:"stat recoverd"},r.a.createElement("div",{className:"stat-label"},"recovered"),r.a.createElement("div",{className:"stat-number"},e.recovered)),r.a.createElement("div",{className:"stat deaths"},r.a.createElement("div",{className:"stat-label"},"deaths"),r.a.createElement("div",{className:"stat-number"},e.deaths))))}a(173);var D=a(9),k=["#8884d8","#82ca9d","#84d892","#d8ae84","#d88484","#b184d8","#84d7d8","#cd84d8","#a384d8","#d8849a"];function N(e){return r.a.createElement("div",{className:"chart"},e.title&&r.a.createElement("div",{className:"chart-label"},e.title),r.a.createElement(D.f,{data:e.data,width:e.width?e.width:335,height:e.height?e.height:300,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(D.c,{strokeDasharray:"3 3"}),r.a.createElement(D.h,{dataKey:e.xAxisKey}),r.a.createElement(D.i,null),r.a.createElement(D.g,null),r.a.createElement(D.d,null),e.yAxisKeys.map((function(e,t){return r.a.createElement(D.e,{type:"monotone",dot:!1,dataKey:e.key,key:e.key,stroke:e.color?e.color:k[t],fill:e.color?e.color:k[t],strokeWidth:2})}))))}a(351);function S(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}var K=(new Date).toISOString().split("T")[0];function A(e){var t=Object(n.useState)(e.startDate),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-label"},"Pick start date"),r.a.createElement("input",{className:"input",type:"date",min:"2020-01-22",max:K,onChange:function(t){var a=new Date(t.currentTarget.value);console.log("onchange",a),e.setFromDate(a),i(a.toISOString().split("T")[0])},value:c}))}function C(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),l=Object(s.a)(i,2),m=l[0],v=l[1],y=Object(n.useState)(new Date("2020-03-01")),E=Object(s.a)(y,2),g=E[0],O=E[1],j=h().stats,D=h("daily").stats,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(w),a=Object(n.useState)([]),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)({}),l=Object(s.a)(o,2),m=l[0],v=l[1],h=b(t);return Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("confirmed");case 2:a=t.sent,n=a.reduce((function(e,t){return e[t.countryRegion]?e[t.countryRegion]+=t.confirmed:e[t.countryRegion]=t.confirmed,e}),{}),i(Object.entries(n).sort((function(e,t){return t[1]-e[1]})).slice(0,e).map((function(e){var t=Object(s.a)(e,2),a=t[0];t[1];return a})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(n.useEffect)((function(){var e={};c&&Object.keys(h).length>0&&(c.map((function(e){return{stats:h[e],country:e}})).forEach((function(t){var a=t.stats,n=t.country;Object.entries(a).forEach((function(t){var a=Object(s.a)(t,2),r=a[0],c=a[1];e[r]?e[r][n]=c.confirmed:e[r]=Object(p.a)({},n,c.confirmed)}))})),console.log("dailyStats",e),v(e))}),[h]),{stats:m,names:c}}(10),K=k.stats,C=k.names;return Object(n.useEffect)((function(){var e=Object.entries(K).sort((function(e,t){return new Date(e[0]).getTime()-new Date(t[0]).getTime()})).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(o.a)({date:R(a)},n)}));c(e.slice(e.findIndex((function(e){return e.date===g.toLocaleDateString()}))))}),[K,g]),Object(n.useEffect)((function(){D&&v(D.map((function(e){return{date:e.reportDate,confirmed:e.totalConfirmed,deaths:e.deaths.total}})).sort((function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()})))}),[D]),r.a.createElement(r.a.Fragment,null,!j&&r.a.createElement(S,null),j&&r.a.createElement("div",null,r.a.createElement(x,{confirmed:j.confirmed.value,recovered:j.recovered.value,deaths:j.deaths.value,title:"World's Stats"})),m&&r.a.createElement("div",{className:"charts-group"},r.a.createElement(N,{data:m,xAxisKey:"date",title:"Confirmed",yAxisKeys:[{key:"confirmed"}],width:450}),r.a.createElement(N,{data:m,xAxisKey:"date",title:"Deaths",yAxisKeys:[{key:"deaths",color:"red"}],width:450})),r.a.createElement(A,{startDate:"2020-03-01",setFromDate:O}),a&&C&&r.a.createElement(N,{data:a,xAxisKey:"date",title:"Top countries",yAxisKeys:C.map((function(e){return{key:e}})),width:1e3,height:450}))}function R(e){return e.replace(/-/g,"/")}a(352),a(353);function T(e){var t=h("countries").stats;return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-label"},"Pick a country"),r.a.createElement("select",{className:"input",onChange:function(a){var n=a.currentTarget.value;e.setCountry(n),e.setCountryName(function(e){if(t){var a=t.countries.find((function(t){return e===t.iso2}));if(console.log("result",a),a)return a.name}return"cannot be found"}(n))},value:e.country},t&&t.countries.map((function(e){return r.a.createElement("option",{key:e.name,value:e.iso2},e.name)}))))}function I(e){return r.a.createElement(D.b,{width:e.width,height:e.height,data:e.data,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(D.c,{strokeDasharray:"3 3"}),r.a.createElement(D.h,{dataKey:e.xAxisKey}),r.a.createElement(D.i,null),r.a.createElement(D.g,null),r.a.createElement(D.d,null),e.barKeys.map((function(e){return r.a.createElement(D.a,{dataKey:e.key,fill:e.color?e.color:"#8884d8"})})))}function F(){var e=Object(n.useState)("IL"),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)("Israel"),l=Object(s.a)(i,2),u=l[0],d=l[1],m=Object(n.useState)(),f=Object(s.a)(m,2),v=f[0],y=f[1],p=Object(n.useState)(),E=Object(s.a)(p,2),g=E[0],O=E[1],j=h("countries/".concat(a)),w=j.stats,D=j.error,k=b(),K=[{key:"confirmed"},{key:"recovered",color:"green"},{key:"deaths",color:"red"}];return Object(n.useEffect)((function(){k&&k[u]&&Object.entries(k[u]).length>0&&y(Object.entries(k[u]).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(o.a)({date:a},n)})).sort((function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()})))}),[u,k]),Object(n.useEffect)((function(){if(console.log(1,"dailyChartData",v),v){var e=[];v.reduce((function(t,a){return e.push({date:a.date,confirmedDelta:Math.abs(a.confirmed-t.confirmed),deathsDelta:Math.abs(a.deaths-t.deaths),recoveredDelta:Math.abs(a.recovered-t.recovered)}),a}),{date:"",confirmed:0,deaths:0,recovered:0}),console.log(2,"dailyChartData",e),O(e)}}),[v]),r.a.createElement(r.a.Fragment,null,!w&&r.a.createElement(S,null),w&&r.a.createElement("div",null,!D&&r.a.createElement(x,{confirmed:w.confirmed.value,deaths:w.deaths.value,recovered:w.recovered.value,title:u+"'s Stats"}),D&&r.a.createElement("div",null,"Could not find data for ",u," at the moment...")),r.a.createElement(T,{setCountry:c,setCountryName:d,country:a}),k&&v&&g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{data:v,xAxisKey:"date",yAxisKeys:K,width:1e3}),r.a.createElement("div",{className:"charts-group"},K.map((function(e){return r.a.createElement("div",{key:e.key},r.a.createElement(N,{data:v,xAxisKey:"date",yAxisKeys:[e],title:e.key}))}))),r.a.createElement("div",{className:"charts-group"},[{key:"confirmedDelta"},{key:"recoveredDelta",color:"green"},{key:"deathsDelta",color:"red"}].map((function(e){return r.a.createElement("div",{key:e.key},r.a.createElement(I,{data:g,xAxisKey:"date",barKeys:[e],width:335,height:300}))})))))}function M(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"title"},"Covid19 Statistics"),r.a.createElement("div",{className:"container"},r.a.createElement(C,null)),r.a.createElement("div",{className:"container"},r.a.createElement(F,null)))}i.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.69fc3e31.chunk.js.map